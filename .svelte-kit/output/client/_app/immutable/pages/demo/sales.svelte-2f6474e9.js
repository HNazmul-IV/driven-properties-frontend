import{S as G,i as H,s as X,e as b,k as N,c as I,a as L,d as g,m as $,b as m,g as F,f as q,G as E,Q as ee,R as te,E as A,v as R,w as S,x as O,y as j,q as z,o as U,B as Q,ag as se}from"../../chunks/index-f4dbb4b4.js";import{a as ne}from"../../chunks/algoliasearch.umd-a2db95c4.js";import{S as oe}from"../../chunks/csMaps.svelte_svelte_type_style_lang-a72545d9.js";import{a as M}from"../../chunks/mapbox-gl-bd635c75.js";/* empty css                             */import{c as Y}from"../../chunks/others-c2922311.js";import"../../chunks/_commonjsHelpers-461dc783.js";function K(h,e,s){const t=h.slice();return t[2]=e[s],t}function W(h,e){let s,t;return{key:h,first:null,c(){s=b("div"),t=N(),this.h()},l(o){s=I(o,"DIV",{class:!0,id:!0}),L(s).forEach(g),t=$(o),this.h()},h(){m(s,"class","listings"),m(s,"id","listings"),this.first=s},m(o,n){F(o,s,n),F(o,t,n)},p(o,n){},d(o){o&&g(s),o&&g(t)}}}function ae(h){let e,s,t,o=[],n=new Map,u=h[0];const _=a=>a[2].objectID;for(let a=0;a<u.length;a+=1){let c=K(h,u,a),r=_(c);n.set(r,o[a]=W(r))}return{c(){e=b("div"),s=b("div"),t=b("div");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=I(a,"DIV",{class:!0});var c=L(e);s=I(c,"DIV",{class:!0});var r=L(s);t=I(r,"DIV",{class:!0,style:!0});var d=L(t);for(let x=0;x<o.length;x+=1)o[x].l(d);d.forEach(g),r.forEach(g),c.forEach(g),this.h()},h(){m(t,"class",""),q(t,"height","500px"),q(t,"overflow-y","scroll"),m(s,"class","row"),m(e,"class","container")},m(a,c){F(a,e,c),E(e,s),E(s,t);for(let r=0;r<o.length;r+=1)o[r].m(t,null)},p(a,[c]){c&1&&(u=a[0],o=ee(o,c,_,1,a,u,n,t,te,W,null,K))},i:A,o:A,d(a){a&&g(e);for(let c=0;c<o.length;c+=1)o[c].d()}}}function ie(h,e,s){let{data:t=[]}=e;return R(async()=>{document.querySelector(".MarkerLinks")}),h.$$set=o=>{"data"in o&&s(0,t=o.data)},[t]}class re extends G{constructor(e){super(),H(this,e,ie,ae,X,{data:0})}}function le(h){let e,s,t,o,n,u,_,a;return{c(){e=b("div"),s=b("a"),t=b("i"),o=N(),n=b("a"),u=b("i"),_=N(),a=b("div"),this.h()},l(c){e=I(c,"DIV",{class:!0});var r=L(e);s=I(r,"A",{class:!0,style:!0,href:!0});var d=L(s);t=I(d,"I",{class:!0,"aria-hidden":!0}),L(t).forEach(g),d.forEach(g),o=$(r),n=I(r,"A",{class:!0,style:!0,href:!0});var x=L(n);u=I(x,"I",{class:!0,"aria-hidden":!0}),L(u).forEach(g),x.forEach(g),_=$(r),a=I(r,"DIV",{id:!0,class:!0,allowfullscreen:!0,loading:!0}),L(a).forEach(g),r.forEach(g),this.h()},h(){m(t,"class","fa fa-arrows-alt"),m(t,"aria-hidden","true"),m(s,"class","map-expend"),q(s,"z-index","99"),m(s,"href","/"),m(u,"class","fa fa-angle-right"),m(u,"aria-hidden","true"),m(n,"class","map-return"),q(n,"z-index","199"),m(n,"href","/"),m(a,"id","mapView"),m(a,"class","myMapListing svelte-nhc95h"),m(a,"allowfullscreen","true"),m(a,"loading","lazy"),m(e,"class","apartment-sale-right")},m(c,r){F(c,e,r),E(e,s),E(s,t),E(e,o),E(e,n),E(n,u),E(e,_),E(e,a)},p:A,i:A,o:A,d(c){c&&g(e)}}}function ce(h,e,s){let{data:t=[]}=e,{updateFunction:o}=e,{boundingBox:n={_sw:{lng:55.064511502076556,lat:25.004448664717486},_ne:{lng:55.21608849792656,lat:25.15650411973199}}}=e,u=null,_={},a={},c=[],r;return R(async()=>{let d=25.163216852696415,x=55.25120403896978;M.accessToken="pk.eyJ1IjoiZHJpdmVubWFwYm94IiwiYSI6ImNsNjBpaDJoajE4bGgzZm9hYzh4amlhOTEifQ.2X7wHieXqxadrO16pnLl6g";const p=new M.Map({container:"mapView",style:"mapbox://styles/mapbox/streets-v11",center:[x,d],minZoom:6,zoom:8});s(0,n=p.getBounds()),p.on("load",()=>{C(t),p.addSource("places",{type:"geojson",data:r}),B(t),y(r),f(),p.addControl(new M.FullscreenControl),p.addControl(new M.NavigationControl),p.zoomTo(10,{duration:700}),p.on("movestart",i=>{const l=document.getElementsByClassName("mapboxgl-popup");l[0]&&l[0].remove(),B(t),y(r),f()}),p.on("resize",()=>{const i=document.getElementsByClassName("mapboxgl-popup");i[0]&&i[0].remove(),B(t),y(r),f()}),p.on("moveend",()=>{const i=document.getElementsByClassName("mapboxgl-popup");i[0]&&i[0].remove(),B(t),y(r),f()}),p.on("mousemove",i=>{const l=document.getElementsByClassName("mapboxgl-popup");l[0]&&l[0].remove(),B(t),y(r),f()}),p.on("mouseover",i=>{const l=document.getElementsByClassName("mapboxgl-popup");l[0]&&l[0].remove(),B(t),y(r),f()}),p.on("mouseleave",i=>{const l=document.getElementsByClassName("mapboxgl-popup");l[0]&&l[0].remove(),B(t),y(r),f()})});const C=i=>{let l=i.length;for(let v=0;v<l;v++){let w=Y(i[v].Price).replaceAll(".00",""),D=Y(i[v].Price).replaceAll(".00","");_[v]={type:"Feature",geometry:{type:"Point",coordinates:[i[v].Longitude,i[v].Latitude]},properties:{id:`${i[v].objectID}`,MPrice:`${w}`,active:`${i[v].Published}`,description:`<strong>AED ${D}</strong>`}},c.push(_[v])}a=c,r={type:"FeatureCollection",features:a}},f=()=>{for(const i of r.features){const l=document.createElement("div");l.id=`marker-${i.properties.id}`,l.className="marker",new M.Marker(l,{offset:[0,-23]}).setLngLat(i.geometry.coordinates).addTo(p),l.addEventListener("mouseenter",v=>{P(i),T(i);const w=document.getElementsByClassName("active");v.stopPropagation(),w[0]&&w[0].classList.remove("active"),document.getElementById(`listing-${i.properties.id}`).classList.add("active")})}},y=i=>{for(const l of i.features){const w=document.getElementById("listings").appendChild(document.createElement("div"));w.id=`listing-${l.properties.id}`,w.className="item";const D=w.appendChild(document.createElement("a"));D.href="!#",D.className="title MarkerLinks",D.id=`link-${l.properties.id}`,D.innerHTML=`ID: ${l.properties.id} Price: ${l.properties.MPrice}`,D.addEventListener("mouseenter",function(){for(const Z of i.features)this.id===`link-${Z.properties.id}`&&T(Z);const J=document.getElementsByClassName("active");J[0]&&J[0].classList.remove("active"),this.parentNode.classList.add("active")})}},P=i=>{p.flyTo({center:i.geometry.coordinates,zoom:15})},k=new M.Popup({className:"black-popup",closeButton:!1,closeOnClick:!1}),T=i=>{console.log(k),document.getElementById("link-"+i.properties.id).addEventListener("mouseover",v=>{k.setLngLat(i.geometry.coordinates).setHTML(`${i.properties.description}`).addTo(p)})},V=i=>{i.features.forEach(function(l){l.properties.active=="Yes"&&(document.createElement("span"),new M.Popup({closeButton:!1,closeOnClick:!0}).setLngLat(l.geometry.coordinates).setHTML(`${l.properties.description}`).addTo(p))})};let B=i=>{s(0,n=p.getBounds());let l=i.length;for(let v=1;v<l;v++)u={type:"FeatureCollection",features:[{type:"Feature",properties:{description:`<strong>AED ${Y(i[v].Price).replaceAll(".00","")}</strong>`,active:`${i[v].Published}`,price:i[v].Price},geometry:{type:"Point",coordinates:[i[v].Longitude,i[v].Latitude]}}]},V(u)}}),h.$$set=d=>{"data"in d&&s(1,t=d.data),"updateFunction"in d&&s(2,o=d.updateFunction),"boundingBox"in d&&s(0,n=d.boundingBox)},[n,t,o]}class de extends G{constructor(e){super(),H(this,e,ce,le,X,{data:1,updateFunction:2,boundingBox:0})}}function ue(h){let e,s,t,o,n,u,_,a,c,r,d,x,p,C;return n=new oe({}),r=new re({props:{data:h[1]}}),p=new de({props:{boundingBox:h[0],data:h[1],updateFunction:h[2]}}),{c(){e=b("section"),s=b("div"),t=b("div"),o=b("div"),S(n.$$.fragment),u=N(),_=b("div"),a=b("div"),c=b("div"),S(r.$$.fragment),d=N(),x=b("div"),S(p.$$.fragment),this.h()},l(f){e=I(f,"SECTION",{});var y=L(e);s=I(y,"DIV",{class:!0});var P=L(s);t=I(P,"DIV",{class:!0});var k=L(t);o=I(k,"DIV",{class:!0});var T=L(o);O(n.$$.fragment,T),T.forEach(g),k.forEach(g),P.forEach(g),u=$(y),_=I(y,"DIV",{class:!0});var V=L(_);a=I(V,"DIV",{class:!0});var B=L(a);c=I(B,"DIV",{class:!0});var i=L(c);O(r.$$.fragment,i),i.forEach(g),d=$(B),x=I(B,"DIV",{class:!0});var l=L(x);O(p.$$.fragment,l),l.forEach(g),B.forEach(g),V.forEach(g),y.forEach(g),this.h()},h(){m(o,"class","col-sm"),m(t,"class","row"),m(s,"class","container mt-5 mb-5"),m(c,"class","col-sm"),m(x,"class","col-sm"),m(a,"class","row"),m(_,"class","container mt-5 mb-5")},m(f,y){F(f,e,y),E(e,s),E(s,t),E(t,o),j(n,o,null),E(e,u),E(e,_),E(_,a),E(a,c),j(r,c,null),E(a,d),E(a,x),j(p,x,null),C=!0},p(f,[y]){const P={};y&2&&(P.data=f[1]),r.$set(P);const k={};y&1&&(k.boundingBox=f[0]),y&2&&(k.data=f[1]),y&4&&(k.updateFunction=f[2]),p.$set(k)},i(f){C||(z(n.$$.fragment,f),z(r.$$.fragment,f),z(p.$$.fragment,f),C=!0)},o(f){U(n.$$.fragment,f),U(r.$$.fragment,f),U(p.$$.fragment,f),C=!1},d(f){f&&g(e),Q(n),Q(r),Q(p)}}}const me="48O3SXQXMR",pe="ec1af9fe04b917db992f934e4b96b695",fe="tbl_properties";let ge=5;function he(h,e,s){const o=ne(me,pe).initIndex(fe);let n,u,{boundingBox:_={_sw:{lng:55.098586285398085,lat:25.00444866471817},_ne:{lng:55.18201371459705,lat:25.15650411973273}}}=e,{boundingBoxForQuery:a=[25.004448664717486,55.064511502076556,25.15650411973199,55.21608849792656]}=e,c,r;return R(async()=>{o.search("",{insideBoundingBox:[a]}).then(({hits:d})=>{s(1,n=d)}),s(2,u=d=>{s(3,a=[d._sw.lat,d._sw.lng,d._ne.lat,d._ne.lng]),o.search("",{insideBoundingBox:[a]}).then(({hits:x})=>{s(1,n=x)})}),console.log(n),c=n?n.length:0,r=Math.ceil(c/ge),console.log(r)}),h.$$set=d=>{"boundingBox"in d&&s(0,_=d.boundingBox),"boundingBoxForQuery"in d&&s(3,a=d.boundingBoxForQuery)},[_,n,u,a]}class ve extends G{constructor(e){super(),H(this,e,he,ue,X,{boundingBox:0,boundingBoxForQuery:3})}}function _e(h){let e,s,t,o;return t=new ve({}),{c(){e=b("meta"),s=N(),S(t.$$.fragment),this.h()},l(n){const u=se('[data-svelte="svelte-xpl071"]',document.head);e=I(u,"META",{name:!0,content:!0}),u.forEach(g),s=$(n),O(t.$$.fragment,n),this.h()},h(){document.title="About Us",m(e,"name","description"),m(e,"content","About Us Page app")},m(n,u){E(document.head,e),F(n,s,u),j(t,n,u),o=!0},p:A,i(n){o||(z(t.$$.fragment,n),o=!0)},o(n){U(t.$$.fragment,n),o=!1},d(n){g(e),n&&g(s),Q(t,n)}}}class ke extends G{constructor(e){super(),H(this,e,null,_e,X,{})}}export{ke as default};
