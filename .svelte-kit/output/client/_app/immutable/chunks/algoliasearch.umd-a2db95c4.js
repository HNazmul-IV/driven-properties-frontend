import{c as Vt}from"./_commonjsHelpers-461dc783.js";var De={exports:{}};/*! algoliasearch.umd.js | 4.17.0 | Â© Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */(function(qe,_t){(function(oe,B){qe.exports=B()})(Vt,function(){function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B(Object(r),!0).forEach(function(n){oe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x(e,t){if(e==null)return{};var r,n,a=function(s,u){if(s==null)return{};var c,d,f={},h=Object.keys(s);for(d=0;d<h.length;d++)c=h[d],u.indexOf(c)>=0||(f[c]=s[c]);return f}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function k(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){if(Symbol.iterator in Object(r)||Object.prototype.toString.call(r)==="[object Arguments]"){var a=[],o=!0,s=!1,u=void 0;try{for(var c,d=r[Symbol.iterator]();!(o=(c=d.next()).done)&&(a.push(c.value),!n||a.length!==n);o=!0);}catch(f){s=!0,u=f}finally{try{o||d.return==null||d.return()}finally{if(s)throw u}}return a}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function z(e){return function(t){if(Array.isArray(t)){for(var r=0,n=new Array(t.length);r<t.length;r++)n[r]=t[r];return n}}(e)||function(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Se(e){var t,r="algoliasearch-client-js-".concat(e.key),n=function(){return t===void 0&&(t=e.localStorage||window.localStorage),t},a=function(){return JSON.parse(n().getItem(r)||"{}")};return{get:function(o,s){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){var c=JSON.stringify(o),d=a()[c];return Promise.all([d||s(),d!==void 0])}).then(function(c){var d=k(c,2),f=d[0],h=d[1];return Promise.all([f,h||u.miss(f)])}).then(function(c){return k(c,1)[0]})},set:function(o,s){return Promise.resolve().then(function(){var u=a();return u[JSON.stringify(o)]=s,n().setItem(r,JSON.stringify(u)),s})},delete:function(o){return Promise.resolve().then(function(){var s=a();delete s[JSON.stringify(o)],n().setItem(r,JSON.stringify(s))})},clear:function(){return Promise.resolve().then(function(){n().removeItem(r)})}}}function J(e){var t=z(e.caches),r=t.shift();return r===void 0?{get:function(n,a){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},s=a();return s.then(function(u){return Promise.all([u,o.miss(u)])}).then(function(u){return k(u,1)[0]})},set:function(n,a){return Promise.resolve(a)},delete:function(n){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(n,a){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return r.get(n,a,o).catch(function(){return J({caches:t}).get(n,a,o)})},set:function(n,a){return r.set(n,a).catch(function(){return J({caches:t}).set(n,a)})},delete:function(n){return r.delete(n).catch(function(){return J({caches:t}).delete(n)})},clear:function(){return r.clear().catch(function(){return J({caches:t}).clear()})}}}function V(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},t={};return{get:function(r,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},o=JSON.stringify(r);if(o in t)return Promise.resolve(e.serializable?JSON.parse(t[o]):t[o]);var s=n(),u=a&&a.miss||function(){return Promise.resolve()};return s.then(function(c){return u(c)}).then(function(){return s})},set:function(r,n){return t[JSON.stringify(r)]=e.serializable?JSON.stringify(n):n,Promise.resolve(n)},delete:function(r){return delete t[JSON.stringify(r)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function _(e,t,r){var n={"x-algolia-api-key":r,"x-algolia-application-id":t};return{headers:function(){return e===F.WithinHeaders?n:{}},queryParameters:function(){return e===F.WithinQueryParameters?n:{}}}}function N(e){var t=0;return e(function r(){return t++,new Promise(function(n){setTimeout(function(){n(e(r))},Math.min(100*t,1e3))})})}function y(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(r,n){return Promise.resolve()};return Object.assign(e,{wait:function(r){return y(e.then(function(n){return Promise.all([t(n,r),n])}).then(function(n){return n[1]}))}})}function ke(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}function G(e,t){return t&&Object.keys(t).forEach(function(r){e[r]=t[r](e)}),e}function l(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=0;return e.replace(/%s/g,function(){return encodeURIComponent(r[a++])})}var F={WithinQueryParameters:0,WithinHeaders:1};function q(e,t){var r=e||{},n=r.data||{};return Object.keys(r).forEach(function(a){["timeout","headers","queryParameters","data","cacheable"].indexOf(a)===-1&&(n[a]=r[a])}),{data:Object.entries(n).length>0?n:void 0,timeout:r.timeout||t,headers:r.headers||{},queryParameters:r.queryParameters||{},cacheable:r.cacheable}}var E={Read:1,Write:2,Any:3},ue=1,Te=2,ie=3;function se(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ue;return i(i({},e),{},{status:t,lastUpdate:Date.now()})}function ce(e){return typeof e=="string"?{protocol:"https",url:e,accept:E.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||E.Any}}var R="DELETE",P="GET",g="POST",X="PUT";function Ne(e,t){return Promise.all(t.map(function(r){return e.get(r,function(){return Promise.resolve(se(r))})})).then(function(r){var n=r.filter(function(s){return function(u){return u.status===ue||Date.now()-u.lastUpdate>12e4}(s)}),a=r.filter(function(s){return function(u){return u.status===ie&&Date.now()-u.lastUpdate<=12e4}(s)}),o=[].concat(z(n),z(a));return{getTimeout:function(s,u){return(a.length===0&&s===0?1:a.length+3+s)*u},statelessHosts:o.length>0?o.map(function(s){return ce(s)}):t}})}function fe(e,t,r,n){var a=[],o=function(p,v){if(!(p.method===P||p.data===void 0&&v.data===void 0)){var m=Array.isArray(p.data)?p.data:i(i({},p.data),v.data);return JSON.stringify(m)}}(r,n),s=function(p,v){var m=i(i({},p.headers),v.headers),b={};return Object.keys(m).forEach(function(w){var D=m[w];b[w.toLowerCase()]=D}),b}(e,n),u=r.method,c=r.method!==P?{}:i(i({},r.data),n.data),d=i(i(i({"x-algolia-agent":e.userAgent.value},e.queryParameters),c),n.queryParameters),f=0,h=function p(v,m){var b=v.pop();if(b===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:le(a)};var w={data:o,headers:s,method:u,url:Re(b,r.path,d),connectTimeout:m(f,e.timeouts.connect),responseTimeout:m(f,n.timeout)},D=function(j){var I={request:w,response:j,host:b,triesLeft:v.length};return a.push(I),I},K={onSuccess:function(j){return function(I){try{return JSON.parse(I.content)}catch(T){throw function(S,U){return{name:"DeserializationError",message:S,response:U}}(T.message,I)}}(j)},onRetry:function(j){var I=D(j);return j.isTimedOut&&f++,Promise.all([e.logger.info("Retryable failure",pe(I)),e.hostsCache.set(b,se(b,j.isTimedOut?ie:Te))]).then(function(){return p(v,m)})},onFail:function(j){throw D(j),function(I,T){var S=I.content,U=I.status,W=S;try{W=JSON.parse(S).message}catch{}return function(L,ae,Lt){return{name:"ApiError",message:L,status:ae,transporterStackTrace:Lt}}(W,U,T)}(j,le(a))}};return e.requester.send(w).then(function(j){return function(I,T){return function(S){var U=S.status;return S.isTimedOut||function(W){var L=W.isTimedOut,ae=W.status;return!L&&~~ae==0}(S)||~~(U/100)!=2&&~~(U/100)!=4}(I)?T.onRetry(I):~~(I.status/100)==2?T.onSuccess(I):T.onFail(I)}(j,K)})};return Ne(e.hostsCache,t).then(function(p){return h(z(p.statelessHosts).reverse(),p.getTimeout)})}function Y(e){var t=e.hostsCache,r=e.logger,n=e.requester,a=e.requestsCache,o=e.responsesCache,s=e.timeouts,u=e.userAgent,c=e.hosts,d=e.queryParameters,f={hostsCache:t,logger:r,requester:n,requestsCache:a,responsesCache:o,timeouts:s,userAgent:u,headers:e.headers,queryParameters:d,hosts:c.map(function(h){return ce(h)}),read:function(h,p){var v=q(p,f.timeouts.read),m=function(){return fe(f,f.hosts.filter(function(w){return(w.accept&E.Read)!=0}),h,v)};if((v.cacheable!==void 0?v.cacheable:h.cacheable)!==!0)return m();var b={request:h,mappedRequestOptions:v,transporter:{queryParameters:f.queryParameters,headers:f.headers}};return f.responsesCache.get(b,function(){return f.requestsCache.get(b,function(){return f.requestsCache.set(b,m()).then(function(w){return Promise.all([f.requestsCache.delete(b),w])},function(w){return Promise.all([f.requestsCache.delete(b),Promise.reject(w)])}).then(function(w){var D=k(w,2);return D[0],D[1]})})},{miss:function(w){return f.responsesCache.set(b,w)}})},write:function(h,p){return fe(f,f.hosts.filter(function(v){return(v.accept&E.Write)!=0}),h,q(p,f.timeouts.write))}};return f}function Ee(e){var t={value:"Algolia for JavaScript (".concat(e,")"),add:function(r){var n="; ".concat(r.segment).concat(r.version!==void 0?" (".concat(r.version,")"):"");return t.value.indexOf(n)===-1&&(t.value="".concat(t.value).concat(n)),t}};return t}function Re(e,t,r){var n=de(r),a="".concat(e.protocol,"://").concat(e.url,"/").concat(t.charAt(0)==="/"?t.substr(1):t);return n.length&&(a+="?".concat(n)),a}function de(e){return Object.keys(e).map(function(t){return l("%s=%s",t,(r=e[t],Object.prototype.toString.call(r)==="[object Object]"||Object.prototype.toString.call(r)==="[object Array]"?JSON.stringify(e[t]):e[t]));var r}).join("&")}function le(e){return e.map(function(t){return pe(t)})}function pe(e){var t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return i(i({},e),{},{request:i(i({},e.request),{},{headers:i(i({},e.request.headers),t)})})}var Ae=function(e){return function(t,r){return e.transporter.write({method:g,path:"2/abtests",data:t},r)}},Ce=function(e){return function(t,r){return e.transporter.write({method:R,path:l("2/abtests/%s",t)},r)}},Ue=function(e){return function(t,r){return e.transporter.read({method:P,path:l("2/abtests/%s",t)},r)}},ze=function(e){return function(t){return e.transporter.read({method:P,path:"2/abtests"},t)}},Je=function(e){return function(t,r){return e.transporter.write({method:g,path:l("2/abtests/%s/stop",t)},r)}},Fe=function(e){return function(t){return e.transporter.read({method:P,path:"1/strategies/personalization"},t)}},He=function(e){return function(t,r){return e.transporter.write({method:g,path:"1/strategies/personalization",data:t},r)}};function Z(e){return function t(r){return e.request(r).then(function(n){if(e.batch!==void 0&&e.batch(n.hits),!e.shouldStop(n))return n.cursor?t({cursor:n.cursor}):t({page:(r.page||0)+1})})}({})}var Me=function(e){return function(t,r){var n=r||{},a=n.queryParameters,o=x(n,["queryParameters"]),s=i({acl:t},a!==void 0?{queryParameters:a}:{});return y(e.transporter.write({method:g,path:"1/keys",data:s},o),function(u,c){return N(function(d){return H(e)(u.key,c).catch(function(f){if(f.status!==404)throw f;return d()})})})}},Ke=function(e){return function(t,r,n){var a=q(n);return a.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:g,path:"1/clusters/mapping",data:{cluster:r}},a)}},We=function(e){return function(t,r,n){return e.transporter.write({method:g,path:"1/clusters/mapping/batch",data:{users:t,cluster:r}},n)}},Be=function(e){return function(t,r){return y(e.transporter.write({method:g,path:l("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:{action:"addEntry",body:[]}}},r),function(n,a){return A(e)(n.taskID,a)})}},Q=function(e){return function(t,r,n){return y(e.transporter.write({method:g,path:l("1/indexes/%s/operation",t),data:{operation:"copy",destination:r}},n),function(a,o){return M(e)(t,{methods:{waitTask:O}}).waitTask(a.taskID,o)})}},Ge=function(e){return function(t,r,n){return Q(e)(t,r,i(i({},n),{},{scope:[ne.Rules]}))}},Qe=function(e){return function(t,r,n){return Q(e)(t,r,i(i({},n),{},{scope:[ne.Settings]}))}},Le=function(e){return function(t,r,n){return Q(e)(t,r,i(i({},n),{},{scope:[ne.Synonyms]}))}},Ve=function(e){return function(t,r){return t.method===P?e.transporter.read(t,r):e.transporter.write(t,r)}},_e=function(e){return function(t,r){return y(e.transporter.write({method:R,path:l("1/keys/%s",t)},r),function(n,a){return N(function(o){return H(e)(t,a).then(o).catch(function(s){if(s.status!==404)throw s})})})}},Xe=function(e){return function(t,r,n){var a=r.map(function(o){return{action:"deleteEntry",body:{objectID:o}}});return y(e.transporter.write({method:g,path:l("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:a}},n),function(o,s){return A(e)(o.taskID,s)})}},H=function(e){return function(t,r){return e.transporter.read({method:P,path:l("1/keys/%s",t)},r)}},he=function(e){return function(t,r){return e.transporter.read({method:P,path:l("1/task/%s",t.toString())},r)}},Ye=function(e){return function(t){return e.transporter.read({method:P,path:"/1/dictionaries/*/settings"},t)}},Ze=function(e){return function(t){return e.transporter.read({method:P,path:"1/logs"},t)}},$e=function(e){return function(t){return e.transporter.read({method:P,path:"1/clusters/mapping/top"},t)}},et=function(e){return function(t,r){return e.transporter.read({method:P,path:l("1/clusters/mapping/%s",t)},r)}},tt=function(e){return function(t){var r=t||{},n=r.retrieveMappings,a=x(r,["retrieveMappings"]);return n===!0&&(a.getClusters=!0),e.transporter.read({method:P,path:"1/clusters/mapping/pending"},a)}},M=function(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n={transporter:e.transporter,appId:e.appId,indexName:t};return G(n,r.methods)}},rt=function(e){return function(t){return e.transporter.read({method:P,path:"1/keys"},t)}},nt=function(e){return function(t){return e.transporter.read({method:P,path:"1/clusters"},t)}},at=function(e){return function(t){return e.transporter.read({method:P,path:"1/indexes"},t)}},ot=function(e){return function(t){return e.transporter.read({method:P,path:"1/clusters/mapping"},t)}},ut=function(e){return function(t,r,n){return y(e.transporter.write({method:g,path:l("1/indexes/%s/operation",t),data:{operation:"move",destination:r}},n),function(a,o){return M(e)(t,{methods:{waitTask:O}}).waitTask(a.taskID,o)})}},it=function(e){return function(t,r){return y(e.transporter.write({method:g,path:"1/indexes/*/batch",data:{requests:t}},r),function(n,a){return Promise.all(Object.keys(n.taskID).map(function(o){return M(e)(o,{methods:{waitTask:O}}).waitTask(n.taskID[o],a)}))})}},st=function(e){return function(t,r){return e.transporter.read({method:g,path:"1/indexes/*/objects",data:{requests:t}},r)}},me=function(e){return function(t,r){var n=t.map(function(a){return i(i({},a),{},{params:de(a.params||{})})});return e.transporter.read({method:g,path:"1/indexes/*/queries",data:{requests:n},cacheable:!0},r)}},ge=function(e){return function(t,r){return Promise.all(t.map(function(n){var a=n.params,o=a.facetName,s=a.facetQuery,u=x(a,["facetName","facetQuery"]);return M(e)(n.indexName,{methods:{searchForFacetValues:Oe}}).searchForFacetValues(o,s,i(i({},r),u))}))}},ct=function(e){return function(t,r){var n=q(r);return n.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:R,path:"1/clusters/mapping"},n)}},ft=function(e){return function(t,r,n){var a=r.map(function(o){return{action:"addEntry",body:o}});return y(e.transporter.write({method:g,path:l("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:a}},n),function(o,s){return A(e)(o.taskID,s)})}},dt=function(e){return function(t,r){return y(e.transporter.write({method:g,path:l("1/keys/%s/restore",t)},r),function(n,a){return N(function(o){return H(e)(t,a).catch(function(s){if(s.status!==404)throw s;return o()})})})}},lt=function(e){return function(t,r,n){var a=r.map(function(o){return{action:"addEntry",body:o}});return y(e.transporter.write({method:g,path:l("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:a}},n),function(o,s){return A(e)(o.taskID,s)})}},pt=function(e){return function(t,r,n){return e.transporter.read({method:g,path:l("/1/dictionaries/%s/search",t),data:{query:r},cacheable:!0},n)}},ht=function(e){return function(t,r){return e.transporter.read({method:g,path:"1/clusters/mapping/search",data:{query:t}},r)}},mt=function(e){return function(t,r){return y(e.transporter.write({method:X,path:"/1/dictionaries/*/settings",data:t},r),function(n,a){return A(e)(n.taskID,a)})}},gt=function(e){return function(t,r){var n=Object.assign({},r),a=r||{},o=a.queryParameters,s=x(a,["queryParameters"]),u=o?{queryParameters:o}:{},c=["acl","indexes","referers","restrictSources","queryParameters","description","maxQueriesPerIPPerHour","maxHitsPerQuery"];return y(e.transporter.write({method:X,path:l("1/keys/%s",t),data:u},s),function(d,f){return N(function(h){return H(e)(t,f).then(function(p){return function(v){return Object.keys(n).filter(function(m){return c.indexOf(m)!==-1}).every(function(m){return v[m]===n[m]})}(p)?Promise.resolve():h()})})})}},A=function(e){return function(t,r){return N(function(n){return he(e)(t,r).then(function(a){return a.status!=="published"?n():void 0})})}},ye=function(e){return function(t,r){return y(e.transporter.write({method:g,path:l("1/indexes/%s/batch",e.indexName),data:{requests:t}},r),function(n,a){return O(e)(n.taskID,a)})}},yt=function(e){return function(t){return Z(i(i({shouldStop:function(r){return r.cursor===void 0}},t),{},{request:function(r){return e.transporter.read({method:g,path:l("1/indexes/%s/browse",e.indexName),data:r},t)}}))}},vt=function(e){return function(t){var r=i({hitsPerPage:1e3},t);return Z(i(i({shouldStop:function(n){return n.hits.length<r.hitsPerPage}},r),{},{request:function(n){return xe(e)("",i(i({},r),n)).then(function(a){return i(i({},a),{},{hits:a.hits.map(function(o){return delete o._highlightResult,o})})})}}))}},bt=function(e){return function(t){var r=i({hitsPerPage:1e3},t);return Z(i(i({shouldStop:function(n){return n.hits.length<r.hitsPerPage}},r),{},{request:function(n){return Ie(e)("",i(i({},r),n)).then(function(a){return i(i({},a),{},{hits:a.hits.map(function(o){return delete o._highlightResult,o})})})}}))}},$=function(e){return function(t,r,n){var a=n||{},o=a.batchSize,s=x(a,["batchSize"]),u={taskIDs:[],objectIDs:[]};return y(function c(){var d,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=[];for(d=f;d<t.length&&(h.push(t[d]),h.length!==(o||1e3));d++);return h.length===0?Promise.resolve(u):ye(e)(h.map(function(p){return{action:r,body:p}}),s).then(function(p){return u.objectIDs=u.objectIDs.concat(p.objectIDs),u.taskIDs.push(p.taskID),d++,c(d)})}(),function(c,d){return Promise.all(c.taskIDs.map(function(f){return O(e)(f,d)}))})}},Pt=function(e){return function(t){return y(e.transporter.write({method:g,path:l("1/indexes/%s/clear",e.indexName)},t),function(r,n){return O(e)(r.taskID,n)})}},wt=function(e){return function(t){var r=t||{},n=r.forwardToReplicas,a=q(x(r,["forwardToReplicas"]));return n&&(a.queryParameters.forwardToReplicas=1),y(e.transporter.write({method:g,path:l("1/indexes/%s/rules/clear",e.indexName)},a),function(o,s){return O(e)(o.taskID,s)})}},Ot=function(e){return function(t){var r=t||{},n=r.forwardToReplicas,a=q(x(r,["forwardToReplicas"]));return n&&(a.queryParameters.forwardToReplicas=1),y(e.transporter.write({method:g,path:l("1/indexes/%s/synonyms/clear",e.indexName)},a),function(o,s){return O(e)(o.taskID,s)})}},xt=function(e){return function(t,r){return y(e.transporter.write({method:g,path:l("1/indexes/%s/deleteByQuery",e.indexName),data:t},r),function(n,a){return O(e)(n.taskID,a)})}},It=function(e){return function(t){return y(e.transporter.write({method:R,path:l("1/indexes/%s",e.indexName)},t),function(r,n){return O(e)(r.taskID,n)})}},jt=function(e){return function(t,r){return y(ve(e)([t],r).then(function(n){return{taskID:n.taskIDs[0]}}),function(n,a){return O(e)(n.taskID,a)})}},ve=function(e){return function(t,r){var n=t.map(function(a){return{objectID:a}});return $(e)(n,C.DeleteObject,r)}},Dt=function(e){return function(t,r){var n=r||{},a=n.forwardToReplicas,o=q(x(n,["forwardToReplicas"]));return a&&(o.queryParameters.forwardToReplicas=1),y(e.transporter.write({method:R,path:l("1/indexes/%s/rules/%s",e.indexName,t)},o),function(s,u){return O(e)(s.taskID,u)})}},qt=function(e){return function(t,r){var n=r||{},a=n.forwardToReplicas,o=q(x(n,["forwardToReplicas"]));return a&&(o.queryParameters.forwardToReplicas=1),y(e.transporter.write({method:R,path:l("1/indexes/%s/synonyms/%s",e.indexName,t)},o),function(s,u){return O(e)(s.taskID,u)})}},St=function(e){return function(t){return be(e)(t).then(function(){return!0}).catch(function(r){if(r.status!==404)throw r;return!1})}},kt=function(e){return function(t,r,n){return e.transporter.read({method:g,path:l("1/answers/%s/prediction",e.indexName),data:{query:t,queryLanguages:r},cacheable:!0},n)}},Tt=function(e){return function(t,r){var n=r||{},a=n.query,o=n.paginate,s=x(n,["query","paginate"]),u=0;return function c(){return we(e)(a||"",i(i({},s),{},{page:u})).then(function(d){for(var f=0,h=Object.entries(d.hits);f<h.length;f++){var p=k(h[f],2),v=p[0],m=p[1];if(t(m))return{object:m,position:parseInt(v,10),page:u}}if(u++,o===!1||u>=d.nbPages)throw{name:"ObjectNotFoundError",message:"Object not found."};return c()})}()}},Nt=function(e){return function(t,r){return e.transporter.read({method:P,path:l("1/indexes/%s/%s",e.indexName,t)},r)}},Et=function(){return function(e,t){for(var r=0,n=Object.entries(e.hits);r<n.length;r++){var a=k(n[r],2),o=a[0];if(a[1].objectID===t)return parseInt(o,10)}return-1}},Rt=function(e){return function(t,r){var n=r||{},a=n.attributesToRetrieve,o=x(n,["attributesToRetrieve"]),s=t.map(function(u){return i({indexName:e.indexName,objectID:u},a?{attributesToRetrieve:a}:{})});return e.transporter.read({method:g,path:"1/indexes/*/objects",data:{requests:s}},o)}},At=function(e){return function(t,r){return e.transporter.read({method:P,path:l("1/indexes/%s/rules/%s",e.indexName,t)},r)}},be=function(e){return function(t){return e.transporter.read({method:P,path:l("1/indexes/%s/settings",e.indexName),data:{getVersion:2}},t)}},Ct=function(e){return function(t,r){return e.transporter.read({method:P,path:l("1/indexes/%s/synonyms/%s",e.indexName,t)},r)}},Ut=function(e){return function(t,r){return y(Pe(e)([t],r).then(function(n){return{objectID:n.objectIDs[0],taskID:n.taskIDs[0]}}),function(n,a){return O(e)(n.taskID,a)})}},Pe=function(e){return function(t,r){var n=r||{},a=n.createIfNotExists,o=x(n,["createIfNotExists"]),s=a?C.PartialUpdateObject:C.PartialUpdateObjectNoCreate;return $(e)(t,s,o)}},zt=function(e){return function(t,r){var n=r||{},a=n.safe,o=n.autoGenerateObjectIDIfNotExist,s=n.batchSize,u=x(n,["safe","autoGenerateObjectIDIfNotExist","batchSize"]),c=function(m,b,w,D){return y(e.transporter.write({method:g,path:l("1/indexes/%s/operation",m),data:{operation:w,destination:b}},D),function(K,j){return O(e)(K.taskID,j)})},d=Math.random().toString(36).substring(7),f="".concat(e.indexName,"_tmp_").concat(d),h=ee({appId:e.appId,transporter:e.transporter,indexName:f}),p=[],v=c(e.indexName,f,"copy",i(i({},u),{},{scope:["settings","synonyms","rules"]}));return p.push(v),y((a?v.wait(u):v).then(function(){var m=h(t,i(i({},u),{},{autoGenerateObjectIDIfNotExist:o,batchSize:s}));return p.push(m),a?m.wait(u):m}).then(function(){var m=c(f,e.indexName,"move",u);return p.push(m),a?m.wait(u):m}).then(function(){return Promise.all(p)}).then(function(m){var b=k(m,3),w=b[0],D=b[1],K=b[2];return{objectIDs:D.objectIDs,taskIDs:[w.taskID].concat(z(D.taskIDs),[K.taskID])}}),function(m,b){return Promise.all(p.map(function(w){return w.wait(b)}))})}},Jt=function(e){return function(t,r){return te(e)(t,i(i({},r),{},{clearExistingRules:!0}))}},Ft=function(e){return function(t,r){return re(e)(t,i(i({},r),{},{clearExistingSynonyms:!0}))}},Ht=function(e){return function(t,r){return y(ee(e)([t],r).then(function(n){return{objectID:n.objectIDs[0],taskID:n.taskIDs[0]}}),function(n,a){return O(e)(n.taskID,a)})}},ee=function(e){return function(t,r){var n=r||{},a=n.autoGenerateObjectIDIfNotExist,o=x(n,["autoGenerateObjectIDIfNotExist"]),s=a?C.AddObject:C.UpdateObject;if(s===C.UpdateObject){var u=!0,c=!1,d=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0)if(f.value.objectID===void 0)return y(Promise.reject({name:"MissingObjectIDError",message:"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option."}))}catch(p){c=!0,d=p}finally{try{u||h.return==null||h.return()}finally{if(c)throw d}}}return $(e)(t,s,o)}},Mt=function(e){return function(t,r){return te(e)([t],r)}},te=function(e){return function(t,r){var n=r||{},a=n.forwardToReplicas,o=n.clearExistingRules,s=q(x(n,["forwardToReplicas","clearExistingRules"]));return a&&(s.queryParameters.forwardToReplicas=1),o&&(s.queryParameters.clearExistingRules=1),y(e.transporter.write({method:g,path:l("1/indexes/%s/rules/batch",e.indexName),data:t},s),function(u,c){return O(e)(u.taskID,c)})}},Kt=function(e){return function(t,r){return re(e)([t],r)}},re=function(e){return function(t,r){var n=r||{},a=n.forwardToReplicas,o=n.clearExistingSynonyms,s=n.replaceExistingSynonyms,u=q(x(n,["forwardToReplicas","clearExistingSynonyms","replaceExistingSynonyms"]));return a&&(u.queryParameters.forwardToReplicas=1),(s||o)&&(u.queryParameters.replaceExistingSynonyms=1),y(e.transporter.write({method:g,path:l("1/indexes/%s/synonyms/batch",e.indexName),data:t},u),function(c,d){return O(e)(c.taskID,d)})}},we=function(e){return function(t,r){return e.transporter.read({method:g,path:l("1/indexes/%s/query",e.indexName),data:{query:t},cacheable:!0},r)}},Oe=function(e){return function(t,r,n){return e.transporter.read({method:g,path:l("1/indexes/%s/facets/%s/query",e.indexName,t),data:{facetQuery:r},cacheable:!0},n)}},xe=function(e){return function(t,r){return e.transporter.read({method:g,path:l("1/indexes/%s/rules/search",e.indexName),data:{query:t}},r)}},Ie=function(e){return function(t,r){return e.transporter.read({method:g,path:l("1/indexes/%s/synonyms/search",e.indexName),data:{query:t}},r)}},Wt=function(e){return function(t,r){var n=r||{},a=n.forwardToReplicas,o=q(x(n,["forwardToReplicas"]));return a&&(o.queryParameters.forwardToReplicas=1),y(e.transporter.write({method:X,path:l("1/indexes/%s/settings",e.indexName),data:t},o),function(s,u){return O(e)(s.taskID,u)})}},O=function(e){return function(t,r){return N(function(n){return function(a){return function(o,s){return a.transporter.read({method:P,path:l("1/indexes/%s/task/%s",a.indexName,o.toString())},s)}}(e)(t,r).then(function(a){return a.status!=="published"?n():void 0})})}},C={AddObject:"addObject",UpdateObject:"updateObject",PartialUpdateObject:"partialUpdateObject",PartialUpdateObjectNoCreate:"partialUpdateObjectNoCreate",DeleteObject:"deleteObject",DeleteIndex:"delete",ClearIndex:"clear"},ne={Settings:"settings",Synonyms:"synonyms",Rules:"rules"},Bt=1,Gt=2,Qt=3;function je(e,t,r){var n,a={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(u){return new Promise(function(c){var d=new XMLHttpRequest;d.open(u.method,u.url,!0),Object.keys(u.headers).forEach(function(v){return d.setRequestHeader(v,u.headers[v])});var f,h=function(v,m){return setTimeout(function(){d.abort(),c({status:0,content:m,isTimedOut:!0})},1e3*v)},p=h(u.connectTimeout,"Connection timeout");d.onreadystatechange=function(){d.readyState>d.OPENED&&f===void 0&&(clearTimeout(p),f=h(u.responseTimeout,"Socket timeout"))},d.onerror=function(){d.status===0&&(clearTimeout(p),clearTimeout(f),c({content:d.responseText||"Network request failed",status:d.status,isTimedOut:!1}))},d.onload=function(){clearTimeout(p),clearTimeout(f),c({content:d.responseText,status:d.status,isTimedOut:!1})},d.send(u.data)})}},logger:(n=Qt,{debug:function(u,c){return Bt>=n&&console.debug(u,c),Promise.resolve()},info:function(u,c){return Gt>=n&&console.info(u,c),Promise.resolve()},error:function(u,c){return console.error(u,c),Promise.resolve()}}),responsesCache:V(),requestsCache:V({serializable:!1}),hostsCache:J({caches:[Se({key:"".concat("4.17.0","-").concat(e)}),V()]}),userAgent:Ee("4.17.0").add({segment:"Browser"})},o=i(i({},a),r),s=function(){return function(u){return function(c){var d=c.region||"us",f=_(F.WithinHeaders,c.appId,c.apiKey),h=Y(i(i({hosts:[{url:"personalization.".concat(d,".algolia.com")}]},c),{},{headers:i(i(i({},f.headers()),{"content-type":"application/json"}),c.headers),queryParameters:i(i({},f.queryParameters()),c.queryParameters)}));return G({appId:c.appId,transporter:h},c.methods)}(i(i(i({},a),u),{},{methods:{getPersonalizationStrategy:Fe,setPersonalizationStrategy:He}}))}};return function(u){var c=u.appId,d=_(u.authMode!==void 0?u.authMode:F.WithinHeaders,c,u.apiKey),f=Y(i(i({hosts:[{url:"".concat(c,"-dsn.algolia.net"),accept:E.Read},{url:"".concat(c,".algolia.net"),accept:E.Write}].concat(ke([{url:"".concat(c,"-1.algolianet.com")},{url:"".concat(c,"-2.algolianet.com")},{url:"".concat(c,"-3.algolianet.com")}]))},u),{},{headers:i(i(i({},d.headers()),{"content-type":"application/x-www-form-urlencoded"}),u.headers),queryParameters:i(i({},d.queryParameters()),u.queryParameters)}));return G({transporter:f,appId:c,addAlgoliaAgent:function(h,p){f.userAgent.add({segment:h,version:p})},clearCache:function(){return Promise.all([f.requestsCache.clear(),f.responsesCache.clear()]).then(function(){})}},u.methods)}(i(i({},o),{},{methods:{search:me,searchForFacetValues:ge,multipleBatch:it,multipleGetObjects:st,multipleQueries:me,copyIndex:Q,copySettings:Qe,copySynonyms:Le,copyRules:Ge,moveIndex:ut,listIndices:at,getLogs:Ze,listClusters:nt,multipleSearchForFacetValues:ge,getApiKey:H,addApiKey:Me,listApiKeys:rt,updateApiKey:gt,deleteApiKey:_e,restoreApiKey:dt,assignUserID:Ke,assignUserIDs:We,getUserID:et,searchUserIDs:ht,listUserIDs:ot,getTopUserIDs:$e,removeUserID:ct,hasPendingMappings:tt,clearDictionaryEntries:Be,deleteDictionaryEntries:Xe,getDictionarySettings:Ye,getAppTask:he,replaceDictionaryEntries:ft,saveDictionaryEntries:lt,searchDictionaryEntries:pt,setDictionarySettings:mt,waitAppTask:A,customRequest:Ve,initIndex:function(u){return function(c){return M(u)(c,{methods:{batch:ye,delete:It,findAnswers:kt,getObject:Nt,getObjects:Rt,saveObject:Ht,saveObjects:ee,search:we,searchForFacetValues:Oe,waitTask:O,setSettings:Wt,getSettings:be,partialUpdateObject:Ut,partialUpdateObjects:Pe,deleteObject:jt,deleteObjects:ve,deleteBy:xt,clearObjects:Pt,browseObjects:yt,getObjectPosition:Et,findObject:Tt,exists:St,saveSynonym:Kt,saveSynonyms:re,getSynonym:Ct,searchSynonyms:Ie,browseSynonyms:bt,deleteSynonym:qt,clearSynonyms:Ot,replaceAllObjects:zt,replaceAllSynonyms:Ft,searchRules:xe,getRule:At,deleteRule:Dt,saveRule:Mt,saveRules:te,replaceAllRules:Jt,browseRules:vt,clearRules:wt}})}},initAnalytics:function(){return function(u){return function(c){var d=c.region||"us",f=_(F.WithinHeaders,c.appId,c.apiKey),h=Y(i(i({hosts:[{url:"analytics.".concat(d,".algolia.com")}]},c),{},{headers:i(i(i({},f.headers()),{"content-type":"application/json"}),c.headers),queryParameters:i(i({},f.queryParameters()),c.queryParameters)}));return G({appId:c.appId,transporter:h},c.methods)}(i(i(i({},a),u),{},{methods:{addABTest:Ae,getABTest:Ue,getABTests:ze,stopABTest:Je,deleteABTest:Ce}}))}},initPersonalization:s,initRecommendation:function(){return function(u){return o.logger.info("The `initRecommendation` method is deprecated. Use `initPersonalization` instead."),s()(u)}}}}))}return je.version="4.17.0",je})})(De);var Yt=De.exports;export{Yt as a};
