import{$ as y,g as E}from"./navigation.min-5f06678b.js";function V(b){let{swiper:e,extendParams:I,on:h,emit:v}=b;I({lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}}),e.lazy={};let x=!1,$=!1;function p(o,t){t===void 0&&(t=!0);const l=e.params.lazy;if(typeof o=="undefined"||e.slides.length===0)return;const r=e.virtual&&e.params.virtual.enabled?e.$wrapperEl.children(`.${e.params.slideClass}[data-swiper-slide-index="${o}"]`):e.slides.eq(o),i=r.find(`.${l.elementClass}:not(.${l.loadedClass}):not(.${l.loadingClass})`);r.hasClass(l.elementClass)&&!r.hasClass(l.loadedClass)&&!r.hasClass(l.loadingClass)&&i.push(r[0]),i.length!==0&&i.each(m=>{const s=y(m);s.addClass(l.loadingClass);const u=s.attr("data-background"),a=s.attr("data-src"),n=s.attr("data-srcset"),f=s.attr("data-sizes"),C=s.parent("picture");e.loadImage(s[0],a||u,n,f,!1,()=>{if(!(typeof e=="undefined"||e===null||!e||e&&!e.params||e.destroyed)){if(u?(s.css("background-image",`url("${u}")`),s.removeAttr("data-background")):(n&&(s.attr("srcset",n),s.removeAttr("data-srcset")),f&&(s.attr("sizes",f),s.removeAttr("data-sizes")),C.length&&C.children("source").each(d=>{const w=y(d);w.attr("data-srcset")&&(w.attr("srcset",w.attr("data-srcset")),w.removeAttr("data-srcset"))}),a&&(s.attr("src",a),s.removeAttr("data-src"))),s.addClass(l.loadedClass).removeClass(l.loadingClass),r.find(`.${l.preloaderClass}`).remove(),e.params.loop&&t){const d=r.attr("data-swiper-slide-index");if(r.hasClass(e.params.slideDuplicateClass)){const w=e.$wrapperEl.children(`[data-swiper-slide-index="${d}"]:not(.${e.params.slideDuplicateClass})`);p(w.index(),!1)}else{const w=e.$wrapperEl.children(`.${e.params.slideDuplicateClass}[data-swiper-slide-index="${d}"]`);p(w.index(),!1)}}v("lazyImageReady",r[0],s[0]),e.params.autoHeight&&e.updateAutoHeight()}}),v("lazyImageLoad",r[0],s[0])})}function g(){const{$wrapperEl:o,params:t,slides:l,activeIndex:c}=e,r=e.virtual&&t.virtual.enabled,i=t.lazy;let m=t.slidesPerView;m==="auto"&&(m=0);function s(a){if(r){if(o.children(`.${t.slideClass}[data-swiper-slide-index="${a}"]`).length)return!0}else if(l[a])return!0;return!1}function u(a){return r?y(a).attr("data-swiper-slide-index"):y(a).index()}if($||($=!0),e.params.watchSlidesProgress)o.children(`.${t.slideVisibleClass}`).each(a=>{const n=r?y(a).attr("data-swiper-slide-index"):y(a).index();p(n)});else if(m>1)for(let a=c;a<c+m;a+=1)s(a)&&p(a);else p(c);if(i.loadPrevNext)if(m>1||i.loadPrevNextAmount&&i.loadPrevNextAmount>1){const a=i.loadPrevNextAmount,n=Math.ceil(m),f=Math.min(c+n+Math.max(a,n),l.length),C=Math.max(c-Math.max(n,a),0);for(let d=c+n;d<f;d+=1)s(d)&&p(d);for(let d=C;d<c;d+=1)s(d)&&p(d)}else{const a=o.children(`.${t.slideNextClass}`);a.length>0&&p(u(a));const n=o.children(`.${t.slidePrevClass}`);n.length>0&&p(u(n))}}function z(){const o=E();if(!e||e.destroyed)return;const t=e.params.lazy.scrollingElement?y(e.params.lazy.scrollingElement):y(o),l=t[0]===o,c=l?o.innerWidth:t[0].offsetWidth,r=l?o.innerHeight:t[0].offsetHeight,i=e.$el.offset(),{rtlTranslate:m}=e;let s=!1;m&&(i.left-=e.$el[0].scrollLeft);const u=[[i.left,i.top],[i.left+e.width,i.top],[i.left,i.top+e.height],[i.left+e.width,i.top+e.height]];for(let n=0;n<u.length;n+=1){const f=u[n];if(f[0]>=0&&f[0]<=c&&f[1]>=0&&f[1]<=r){if(f[0]===0&&f[1]===0)continue;s=!0}}const a=e.touchEvents.start==="touchstart"&&e.support.passiveListener&&e.params.passiveListeners?{passive:!0,capture:!1}:!1;s?(g(),t.off("scroll",z,a)):x||(x=!0,t.on("scroll",z,a))}h("beforeInit",()=>{e.params.lazy.enabled&&e.params.preloadImages&&(e.params.preloadImages=!1)}),h("init",()=>{e.params.lazy.enabled&&(e.params.lazy.checkInView?z():g())}),h("scroll",()=>{e.params.freeMode&&e.params.freeMode.enabled&&!e.params.freeMode.sticky&&g()}),h("scrollbarDragMove resize _freeModeNoMomentumRelease",()=>{e.params.lazy.enabled&&(e.params.lazy.checkInView?z():g())}),h("transitionStart",()=>{e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!$)&&(e.params.lazy.checkInView?z():g())}),h("transitionEnd",()=>{e.params.lazy.enabled&&!e.params.lazy.loadOnTransitionStart&&(e.params.lazy.checkInView?z():g())}),h("slideChange",()=>{const{lazy:o,cssMode:t,watchSlidesProgress:l,touchReleaseOnEdges:c,resistanceRatio:r}=e.params;o.enabled&&(t||l&&(c||r===0))&&g()}),h("destroy",()=>{!e.$el||e.$el.find(`.${e.params.lazy.loadingClass}`).removeClass(e.params.lazy.loadingClass)}),Object.assign(e.lazy,{load:g,loadInSlide:p})}export{V as L};
